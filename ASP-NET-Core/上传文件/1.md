## [在 ASP.NET Core 中上传文件](https://learn.microsoft.com/zh-cn/aspnet/core/mvc/models/file-uploads?view=aspnetcore-10.0#uploading-multiple-files)

## [MultipartFormDataContent](https://learn.microsoft.com/zh-cn/dotnet/api/system.net.http.multipartformdatacontent?view=net-10.0)

`MultipartFormDataContent.Add` 有多个重载，  
这里用到的是：

```csharp
public void Add(HttpContent content,
                string name,
                string fileName);
```

参数含义（按顺序）：

| 参数名 | 类型 | 作用 |
|--------|------|------|
| `content` | `HttpContent` | 真正的数据内容，通常用 `StreamContent`、`ByteArrayContent`、`StringContent` 等包装。 |
| `name` | `string` | **表单字段名**，必须跟后端参数名一致；本例后端是 `IFormFileCollection files`，所以写 `"files"`。 |
| `fileName` | `string` | **浏览器原始文件名**，会出现在 `Content-Disposition` 的 `filename` 部分，供服务端通过 `IFormFile.FileName` 读取；用 `Path.GetFileName(file)` 即可。 |

因此：

```csharp
content.Add(new StreamContent(stream), "files", Path.GetFileName(file));
```

表示：  
把本地文件流作为 **表单字段 `files`** 的一项上传，并在报文里标记原始文件名为 `Path.GetFileName(file)`。